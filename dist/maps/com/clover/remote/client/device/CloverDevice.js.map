{"version":3,"sources":["com/clover/remote/client/device/CloverDevice.ts"],"names":[],"mappings":";;AAIA;;;;GAIG;AACH;IAOI;;;;;;OAMG;IACH,sBAAY,WAAmB,EAAE,SAA0B,EAAE,aAAqB;QATxE,gBAAW,GAAY,KAAK,CAAC;QAUnC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IAC7B,CAAC;IAED;;;;OAIG;IACI,gCAAS,GAAhB,UAAiB,QAA8B;QAC3C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACxC,CAAC;IAED;;;;OAIG;IACI,kCAAW,GAAlB,UAAmB,QAA8B;QAC7C,IAAI,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC7D,EAAE,CAAC,CAAC,eAAe,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;QACpD,CAAC;IACL,CAAC;IA6ND;;;;OAIG;IACI,sCAAe,GAAtB,UAAuB,WAAoB;QACvC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACnC,CAAC;IAED;;;;OAIG;IACI,mCAAY,GAAnB;QACI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IACL,mBAAC;AAAD,CAvRA,AAuRC,IAAA;AAvRqB,oCAAY","file":"../../../../../../com/clover/remote/client/device/CloverDevice.js","sourcesContent":["import * as sdk from 'remote-pay-cloud-api';\nimport {CloverTransport} from '../transport/CloverTransport';\nimport {CloverDeviceObserver} from '../CloverDeviceObserver';\n\n/**\n * Clover Device\n *\n * Abstract clover device.\n */\nexport abstract class CloverDevice {\n    protected deviceObservers: CloverDeviceObserver[];\n    protected transport: CloverTransport;\n    protected packageName: string;\n    protected applicationId: string;\n    protected supportsAck: boolean = false;\n\n    /**\n     * Constructor\n     *\n     * @param {string} packageName\n     * @param {CloverTransport} transport\n     * @param {string} applicationId\n     */\n    constructor(packageName: string, transport: CloverTransport, applicationId: string) {\n        this.packageName = packageName;\n        this.transport = transport;\n        this.applicationId = applicationId;\n        this.deviceObservers = [];\n        this.supportsAck = false;\n    }\n\n    /**\n     * Add a new observer to the list of observers\n     *\n     * @param {CloverDeviceObserver} observer - observer to add\n     */\n    public subscribe(observer: CloverDeviceObserver): void {\n        this.deviceObservers.push(observer);\n    }\n\n    /**\n     * Remove an observer from the list of observers\n     *\n     * @param {CloverDeviceObserver} observer - observer to remove\n     */\n    public unsubscribe(observer: CloverDeviceObserver): void {\n        var indexOfObserver = this.deviceObservers.indexOf(observer);\n        if (indexOfObserver !== -1) {\n            this.deviceObservers.splice(indexOfObserver, 1);\n        }\n    }\n\n    /**\n     * Discovery request\n     */\n    public abstract doDiscoveryRequest(): void;\n\n    /**\n     * Transaction Start\n     *\n     * @param {sdk.remotemessage.PayIntent} payIntent\n     * @param {sdk.order.Order} order\n     * @param {string} requestInfo - request type.\n     */\n    public abstract doTxStart(payIntent: sdk.remotemessage.PayIntent, order: sdk.order.Order, requestInfo: string): void;\n\n    /**\n     * Key Press\n     *\n     * @param {sdk.remotemessage.KeyPress} keyPress\n     */\n    public abstract doKeyPress(keyPress: sdk.remotemessage.KeyPress): void;\n\n    /**\n     * Void Payment\n     *\n     * @param {sdk.payments.Payment} payment\n     * @param {sdk.order.VoidReason} reason\n     */\n    public abstract doVoidPayment(payment: sdk.payments.Payment, reason: sdk.order.VoidReason): void;\n\n    /**\n     * Capture Auth\n     *\n     * @param {string} paymentId\n     * @param {number} amount\n     * @param {number} tipAmount\n     */\n    public abstract doCaptureAuth(paymentId: string, amount: number, tipAmount: number): void;\n\n    /**\n     * Order Update\n     *\n     * @param {sdk.order.DisplayOrder} order\n     * @param {Object} orderOperation\n     */\n    public abstract doOrderUpdate(order: sdk.order.DisplayOrder, orderOperation: Object): void;\n\n    /**\n     * Signature Verified\n     *\n     * @param {sdk.payments.Payment} payment\n     * @param {boolean} verified\n     */\n    public abstract doSignatureVerified(payment: sdk.payments.Payment, verified: boolean): void;\n\n    /**\n     * Terminal Message\n     *\n     * @param {string} text\n     */\n    public abstract doTerminalMessage(text: string): void;\n\n    /**\n     * Payment Refund\n     *\n     * @param {string} orderId\n     * @param {string} paymentId\n     * @param {number} amount\n     * @param {boolean} fullRefund\n     */\n    public abstract doPaymentRefund(orderId: string, paymentId: string, amount: number, fullRefund: boolean): void;\n\n    /**\n     * Tip Adjust Auth\n     *\n     * @param {string} orderId\n     * @param {string} paymentId\n     * @param {number} amount\n     */\n    public abstract doTipAdjustAuth(orderId: string, paymentId: string, amount: number): void;\n\n    /**\n     * Print Text\n     *\n     * @param {Array<string>} textLines\n     */\n    public abstract doPrintText(textLines: Array<string>, printRequestId?: string, printDeviceId?: string): void;\n\n    /**\n     * Show Welcome Screen\n     */\n    public abstract doShowWelcomeScreen(): void;\n\n    /**\n     * Show Payment Receipt Screen\n     *\n     * @param {string} orderId\n     * @param {string} paymentId\n     */\n    public abstract doShowPaymentReceiptScreen(orderId: string, paymentId: string): void;\n\n    /**\n     * Show Thank You Screen\n     */\n    public abstract doShowThankYouScreen(): void;\n\n    /**\n     * Open Cash Drawer\n     *\n     * @param {string} reason\n     */\n    public abstract doOpenCashDrawer(reason: string, deviceId?: string): void;\n\n    /**\n     * Print Image (Bitmap)\n     *\n     * @param {any} bitmap\n     */\n    public abstract doPrintImageObject(bitmap: any, printRequestId?: string, printDeviceId?: string): void;\n\n    /**\n     * Print Image (URL)\n     *\n     * @param {string} url\n     */\n    public abstract doPrintImageUrl(url: string, printRequestId?: string, printDeviceId?: string): void;\n\n    /**\n     * Dispose\n     */\n    public abstract dispose(): void;\n\n    /**\n     * Closeout\n     *\n     * @param {boolean} allowOpenTabs\n     * @param {string} batchId\n     */\n    public abstract doCloseout(allowOpenTabs: boolean, batchId: string): void;\n\n    /**\n     * Vault Card\n     *\n     * @param {number} cardEntryMethods\n     */\n    public abstract doVaultCard(cardEntryMethods: number): void;\n\n    /**\n     * Reset Device\n     */\n    public abstract doResetDevice(): void;\n\n    /**\n     * Accept Payment\n     *\n     * @param {sdk.payments.Payment} payment\n     */\n    public abstract doAcceptPayment(payment: sdk.payments.Payment): void;\n\n    /**\n     * Reject Payment\n     *\n     * @param {sdk.payments.Payment} payment\n     * @param {sdk.base.Challenge} challenge\n     */\n    public abstract doRejectPayment(payment: sdk.payments.Payment, challenge: sdk.base.Challenge): void;\n\n    /**\n     * Retrieve Pending Payments\n     */\n    public abstract doRetrievePendingPayments(): void;\n\n    /**\n     * Read Card Data\n     *\n     * @param {sdk.remotemessage.PayIntent} payment\n     */\n    public abstract doReadCardData(payment: sdk.remotemessage.PayIntent): void;\n\n    /**\n     * Send a message to a running custom activity\n     *\n     * @param {string} actionId - the id used when the custom action was started\n     * @param {string} payload - the message content, unrestricted format\n     */\n    public abstract doSendMessageToActivity(actionId: string, payload: string): void;\n\n    /**\n     * Start a custom Activity\n     *\n     * @param action - the id to use when starting the activity\n     * @param payload - information to pass to the activity when it is started\n     * @param nonBlocking - if true, the activity may be finished externally\n     */\n    public abstract doStartActivity(action: string, payload: string, nonBlocking: boolean): void;\n\n    /**\n     * Get the status of the device.\n     *\n     * @param {sdk.remotepay.RetrieveDeviceStatusRequest} request - the status request\n     */\n    public abstract doRetrieveDeviceStatus(request: sdk.remotepay.RetrieveDeviceStatusRequest): void;\n\n    /**\n     * Get a payment that was taken on this device in the last 24 hours.\n     *\n     * @param {string} externalPaymentId\n     */\n    public abstract doRetrievePayment(externalPaymentId: string): void;\n\n    /**\n     * Get printers attached to this device.\n     */\n    public abstract doRetrievePrinters(category?: sdk.printer.PrintCategory): void;\n\n    /**\n     * Get the status of a specific print job.\n     */\n    public abstract doRetrievePrintJobStatus(printRequestId: string): void;\n\n    /**\n     * Supports Acknowledgements\n     *\n     * @param {boolean} supportsAck\n     */\n    public setSupportsAcks(supportsAck: boolean): void {\n        this.supportsAck = supportsAck;\n    }\n\n    /**\n     * Get Supports Acknowledgements flag\n     *\n     * @returns boolean - Flag indicating if this device supports acks\n     */\n    public supportsAcks(): boolean {\n        return this.supportsAck;\n    }\n}\n"]}